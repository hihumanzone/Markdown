<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown & LaTeX Renderer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/modals.css">
</head>
<body>
    <div class="main-content">
        <div class="main-area">
            <h1>Markdown & LaTeX Renderer</h1>
            <div class="input-section">
                <h2>Markdown Input</h2>
                <label for="markdownInput">Paste your Markdown (can include LaTeX for math):</label>
                <textarea id="markdownInput" placeholder="Type or paste Markdown here...">
# Hello World
This is **bold** and _italic_.
`inline code`
```javascript
function greet(name) {
  console.log("Hello, " + name + "!");
}
greet("Developer");
```
## Math Examples (KaTeX will render these):
Inline: $E = mc^2$ or \( \alpha + \beta \)
Display:
$$
\sum_{i=0}^{n} i = \frac{n(n+1)}{2}
$$
\[
\text{H}_2\text{O} \quad \text{or H$_2$O}
\]
> This is a blockquote.
> It can span multiple lines.
- Unordered list item 1
- Unordered list item 2
  - Nested item
    with another line
      and a more nested line.
1. Ordered list item 1
2. Ordered list item 2
---
| Header 1 | Header 2 | Header 3 |
| -------- | -------- | -------- |
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |
## Note
Single dollar signs that should not render math: This product costs $10 only.
Don't write something like $E=mc^2$ across multiple lines.
                </textarea>
                <div class="button-group">
                    <button id="renderMarkdownBtn" class="button-primary" title="Render the markdown content">Render Markdown</button>
                    <button id="pasteAndRenderBtn" class="button-secondary" title="Paste from clipboard and render">Paste & Render</button>
                    <button id="clearBtn" class="button-secondary" title="Clear the input">Clear</button>
                    <input type="file" id="importFileInput" accept=".md,.markdown,.txt,text/markdown" style="display:none" />
                    <button id="importBtn" class="button-secondary" title="Import a local .md, .markdown, or .txt file">Import File</button>
                    <button id="themeToggleBtn" class="button-secondary" title="Toggle theme (Ctrl/Cmd + T)">Dark Theme</button>
                </div>
            </div>
        </div>
        <div class="workspace-panel">
            <div class="library-sections">
                <h3>My Library</h3>
                <button id="addSectionBtn" class="modal-button modal-button-primary" style="width: 100%; margin-bottom: 1rem;">Add to Library</button>
                <div id="savedSectionsList" class="sections-list">
                    <div class="empty-state">No saved sections yet</div>
                </div>
            </div>
            <div class="recent-history" style="margin-top: 1.5rem;">
                <h3>Recent History</h3>
                <div id="historyList" class="history-list">
                    <div class="empty-state">No recent history</div>
                </div>
            </div>
        </div>
        <div class="info">
            <p><strong>How it works:</strong></p>
            <ul>
                <li>Markdown rendering via <strong>Marked.js</strong>. LaTeX is preserved.</li>
                <li>LaTeX math rendering via <strong>KaTeX</strong> in the new tab (<code>$...$</code>, <code>$$...$$</code>, <code>\(...\)</code>, <code>\[...\]</code>).</li>
                <li><strong>Font size controls</strong>, theme toggle, save-as-PDF, export as .md, and export as high-quality PNG are available in the rendered output tab.</li>
                <li><strong>Long press on list items</strong> to copy their content to clipboard.</li>
                <li>Output opens in a new tab (ensure pop-ups are allowed).</li>
            </ul>
        </div>
    </div>

    <!-- Custom Modals -->
    <!-- Add Section Modal -->
    <div id="addSectionModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">Add to Library</h3>
                <button class="modal-close" data-close-modal="addSectionModal">&times;</button>
            </div>
            <div class="modal-content">
                <input type="text" id="modalSectionTitle" class="modal-input" placeholder="Enter a title for your library item..." maxlength="100">
                <textarea id="modalSectionContent" class="modal-textarea" placeholder="Enter your markdown content here..."></textarea>
                
                <div class="import-section">
                    <input type="file" id="modalImportFileInput" accept=".md,.markdown,.txt,text/markdown" style="display:none" />
                    <button id="modalImportBtn" class="import-button">
                        üìÅ Import Markdown File
                        <br><small>File name will be used as title</small>
                    </button>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-button modal-button-secondary" data-close-modal="addSectionModal">Cancel</button>
                <button id="modalSaveBtn" class="modal-button modal-button-primary">Save to Library</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title" id="confirmModalTitle">Confirm Action</h3>
                <button class="modal-close" data-close-modal="confirmModal">&times;</button>
            </div>
            <div class="modal-content">
                <p id="confirmModalMessage">Are you sure you want to proceed?</p>
            </div>
            <div class="modal-actions">
                <button class="modal-button modal-button-secondary" data-close-modal="confirmModal">Cancel</button>
                <button id="confirmModalAction" class="modal-button modal-button-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Prompt Modal -->
    <div id="promptModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title" id="promptModalTitle">Input Required</h3>
                <button class="modal-close" data-close-modal="promptModal">&times;</button>
            </div>
            <div class="modal-content">
                <p id="promptModalMessage">Please enter a value:</p>
                <input type="text" id="promptModalInput" class="modal-input">
            </div>
            <div class="modal-actions">
                <button class="modal-button modal-button-secondary" data-close-modal="promptModal">Cancel</button>
                <button id="promptModalAction" class="modal-button modal-button-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
    <div id="alertModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title" id="alertModalTitle">Notice</h3>
                <button class="modal-close" data-close-modal="alertModal">&times;</button>
            </div>
            <div class="modal-content">
                <p id="alertModalMessage">This is an alert message.</p>
            </div>
            <div class="modal-actions">
                <button id="alertModalAction" class="modal-button modal-button-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Application JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/current-content-manager.js"></script>
    <script src="js/history-manager.js"></script>
    <script src="js/sections-manager.js"></script>
    <script src="js/file-manager.js"></script>
    <script src="js/modal-manager.js"></script>
    <script src="js/markdown-processor.js"></script>
    <script src="js/rendered-page-builder.js"></script>
    <script src="js/saved-sections-manager.js"></script>
    <script src="js/theme-controller.js"></script>
    <script src="js/app.js"></script>
    <script src="js/main.js"></script>
</body>
</html>